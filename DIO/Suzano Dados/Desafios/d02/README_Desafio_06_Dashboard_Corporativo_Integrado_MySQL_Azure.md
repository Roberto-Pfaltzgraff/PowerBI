# BootCamp üåøSuzano & DIO: An√°lise de Dados com Power BI üé≤ (*Desafio 06*)
### Desafio 06 - **Dashboard** Corporativo com Integra√ß√£o com **MySQL** e **Azure**  
    
## üéØObjetivo:
Confeccionar um **Dashboard** em Power BI, conforme *Descri√ß√£o do Desafio* na **Apresenta√ß√£o do Desafio**.  
O intuito √© aplicar o conhecimento compartilhado at√© essa etapa do curso.  
A ferramenta a ser utilizada ser√°: **Microsoft Power BI**.  
![alt text](./imagens/img_DesafioAceito.png)

    
## ü§ìApresenta√ß√£o do Desafio:
>### Descri√ß√£o do Desafio
>Dever√° criar um Dashboard Corporativo no Power BI, integrado com o MySQL e Azure.  
>Os 2 documentos com os detalhes para esse desafio s√£o:  
> 1) [Desafio de Projeto - Processando e Transformando Dados com Power BI - Instru√ß√µes.docx](./insumos/Desafio%20de%20Projeto%20-%20Processando%20e%20Transformando%20Dados%20com%20Power%20BI%20-%20Instru√ß√µes.docx)  
> 2) [Desafio de Projeto - Processando e Transformando Dados com Power BI.pptx](./insumos/Desafio%20de%20Projeto%20-%20Processando%20e%20Transformando%20Dados%20com%20Power%20BI.pptx)  

### Objetivo:
- Cria√ß√£o de uma inst√¢ncia na Azure para MySQL
- Criar o Banco de Dados com base dispon√≠vel no github
- Integra√ß√£o do Power BI com MySQL no Azure 
- Verificar problemas na base a fim de realizar a transforma√ß√£o dos dados

### Utilize os v√≠deos de passo a passo para cria√ß√£o dos elementos que comp√µem a primeira p√°gina do relat√≥rio:
- Objetos que definem o layout do relat√≥rio
- Gr√°ficos (visuais) e os campos que os comp√µem
- Bot√µes para navegabilidade
- Segmentadores de dados

### Dados extra√≠dos da dica anterior
- Local original dos scripts de cria√ß√£o e carga dos dados desse desafio: [Desafio do M√≥dulo 3 no GitHub da Juliana](https://github.com/julianazanelatto/power_bi_analyst/tree/main/M%C3%B3dulo%203/Desafio%20de%20Projeto)  
- Scripts de cria√ß√£o da estrutura dos dados (db) utilizados nesse desafio: [script_criacao_banco_dados_company.sql](./dados/script_criacao_banco_dados_company.sql) (Fiz corre√ß√µes)  
- Scripts de carga dos dados utilizados nesse desafio: [insercao_de_dados_e_queries.sql](./dados/insercao_de_dados_e_queries.sql) (Fiz corre√ß√µes)  
   

## ü§ìDesafio Feitoüòé! Minha resolu√ß√£oüéâüéâüéâ:  
>### üìùCheck-List
>‚úÖ 01) Criar conta e logar na Azure. Link: [https://azure.microsoft.com/pt-br](https://azure.microsoft.com/pt-br)  
>Utilizei a mesma conta ao qual acesso o Power BI Servi√ßos;  
>‚úÖ 02) Criar uma instancia de Banco de Dados Azure para MySQL (SGDB na nuvem)  
>Op√ß√µes selecionadas:  
>- Criar ‚áí Servi√ßos Gratuitos  
>- Banco de Dados do Azure para MySQL ‚áí Criar;  
>- Servidor flex√≠vel (My) ‚áí Cria√ß√£o R√°pida;  
>
>‚úÖ 03) Acessar o SGDB criado no Azure e criar o Banco de Dados (Esquemas, Tabelas e demais objetos do BD) desejado  
>A√ß√µes necess√°rias:  
>- O script de cria√ß√£o do db e de carga de dados precisaram de ajustes, pois havia comandos com sintaxe de erro e outros apresentavam >problemas de ordena√ß√£o nos dados, devido a restri√ß√£o de integridade; 
>- Realizar conex√£o com o BD MySQL do Azure rec√©m criado;
>- Executar o script de cria√ß√£o da estrutura do banco de dados; 
>
>‚úÖ 04) Fazer a carga da massa de dados dispon√≠vel  
>- Executar o script de carga de dados;  
>  
>‚úÖ 05) Acessar Power BI e fazer conex√£o com essa Base de Dados criada no Azure  
>A√ß√µes:  
>- √â necess√°rio ir nas configura√ß√µes de **Rede** deste servidor Azure e configurar o Firewall, adicionando uma regra que permita todos os IPs.  
>OBS: Fa√ßa isso de forma tempor√°ria, apenas para os testes deste desafio.  
>- O par√¢metro do servidor **require_secure_transport** deve ficar com o valor **ON**, uma vez que o firewall n√£o far√° bloqueio de IP P√∫blico.  
>- Baixar o certificado [DigiCertGlobalRootCA.crt.pem](https://dl.cacerts.digicert.com/DigiCertGlobalRootCA.crt.pem) para conseguir configurar o **MySQL Workbench** e acessar o Banco de Dados MySQL do Azure.  
>- Siga os passos na sele√ß√£o /Configura√ß√µes/**Conectar** do Menu lateral. Nessa √°rea haver√° uma parte dedicada a configura√ß√£o do **MySQL Workbench**;  
>- No Power BI, selecione a op√ß√£o **Obter Dados**, escolha a op√ß√£o **Banco de Dados MySQL**. Clique em **Conectar**;
>- Abrir√° uma tela solicitando informar:  
>   - **Servidor** ‚áí Informe a URL que consta na configura√ß√£o do servidor criado;  
>   - **Banco de Dados** ‚áí Informe o Schema de dados que deseja acessar. √â o mesmo que usa no comando **use**;  
>- Ap√≥s clicar em conectar, abrir√° outra tela para informar as credenciais. Selecione op√ß√£o para inform√°-las;  
>- Selecione a faixa **Banco de Dados** e informe login e senha.  
  
  
> ## üé≤**Diretriz de Transforma√ß√£o dos Dados**:  
> ‚úÖ 01) Ajustar cabe√ßalho e tipos de dados que n√£o esteja em conformidade.  
> ‚úÖ 02) Verificar a exist√™ncia de nulos e analisar a remo√ß√£o.  
> - Apenas o empregado James Borg est√° com matricula de supervisor nulo. N√£o houve necessidade de eliminar o dado, pois ele supervisiona ou √© gerente de outros empregados, conforme dados analisados.  
>
> ‚úÖ 03) Verificar se h√° algum departamento sem gerente.  
> - Verificado que todos os registros da tabela de departamento possuem valore de matricula de gerente que existe na tabela de empregados. Logo, este item est√° ok.  
>
> ‚úÖ 04) Verificar o n√∫mero de horas dos projetos.  
> - Utilizei a coluna do tipo tabela, que foi criada automaticamente na importa√ß√£o da tabela Project. Nela, fiz uma agrega√ß√£o selecionado apenas Soma de Hours.  
>
> ‚úÖ 05) Separar colunas complexas.  
> - Uma parte desta a√ß√£o j√° foi realizada no item anterior, fazendo uma agrega√ß√£o e gerando uma coluna totalizadora. As demais colunas complexas foram exclu√≠das, uma vez que as pr√≥ximas a√ß√µes ser√° para obter dados de outro modo, com a mesclagem.  
>
> ‚úÖ 06) Mesclar consultas **employee** e **departament** para criar uma tabela **employee** que passar√° a possuir o **nome dos departamentos** associados aos colaboradores.  
A mescla ter√° como base a tabela employee.  
Neste processo, elimine as colunas desnecess√°rias!  
> - Realizada a√ß√£o de *Mesclar Consultas* entre as tabelas utilizando o **n√∫mero do departamento** como coluna comum entre elas. Ale¬¥m disso, foi utilizado o *Tipo de Jun√ß√£o* correspondente ao *Left Join*, o que manteve a mesma quantidade de linhas da tabela employee como resultado.  
> - Uma vez que temos o nome do departamento nesta tabela de employee, n√£o faz sentido manter o respectivo n√∫mero/c√≥digo. Portanto, foi exclu√≠do **n√∫mero do departamento** da tabela employee.  
> - Para manter a coer√™ncia e o bom tratamento dos dados nos trabalhos a serem realizados no Power BI, essa mesma a√ß√£o ser√° realizada nas demais consultas/tabelas que possuem o **n√∫mero do departamento**.  
>
> ‚úÖ 07) Mesclar as colunas de **Nome**, **Nome do Meio** e **Sobrenome** para ter apenas uma coluna definindo os **Nomes dos Colaboradores**.  
> ‚úÖ 08) Realizar a jun√ß√£o dos colaboradores e respectivos **nomes dos gerentes**.  
>Isso pode ser feito com consulta SQL ou pela mescla de tabelas com Power BI.  
>Caso utilize SQL, especifique aqui no README a query utilizada no processo.  
> - Esta a√ß√£o realizei pela mescla de tabelas no Power BI.  
> - Entretanto, se eu fizesse por query, ficaria assim:
>```SQL
>select emp.Ssn Matr_Colaborador, concat(emp.Fname, " ", emp.Minit, " ", emp.Lname) Nome_Colaborador,
>	   emp.Super_ssn Matr_Gerente, concat(mgr.Fname, " ", mgr.Minit, " ", mgr.Lname) Nome_Gerente,
>       emp.Bdate Dat_Nasc, emp.Address Endereco, emp.Sex Sexo, emp.Salary Salario, emp.Dno Num_Depto
>from employee emp left join employee mgr on emp.Super_ssn = mgr.Ssn
>```
>
> ‚úÖ 09) Mesclar os nomes de departamentos e localiza√ß√£o. Isso far√° com que cada combina√ß√£o departamento-local seja √∫nico.  
>Isso ir√° auxiliar na cria√ß√£o do modelo estrela em um m√≥dulo futuro.  
> ‚úÖ 10) Explicar por que, neste caso supracitado, podemos apenas utilizar o **mesclar** e n√£o o **atribuir**.  
> - Uma vez que o objetivo da mesclagem, no item anterior, foi de ter o dado de departamento e local de forma distinta, a fun√ß√£o de **mesclar** √© mais adequada porque as duas colunas viram uma √∫nica e ao analis√°-la teremos 5 valores distintos, uma vez que os departamento *Research* n√£o ser√° visto de forma isolada, passar√£o a ser vistos como **departamentos f√≠sicos** (departamento + Local) diferente, ser√° o *Research de Houston*, o outro ser√° *Research de Stafford* e etc. Se fosse a fun√ß√£o **atribuir**, haveria apenas mais uma coluna que seria a jun√ß√£o das outras; possibilitando a visualiza√ß√£o desses 3 departamentos f√≠sicos como sendo o mesmo departamento.  
>
> ‚úÖ 11) Agrupe os dados a fim de saber quantos colaboradores existem por gerente.  
> - Com poucos dados, posso visualizar o agrupamento das colunas atrav√©s da op√ß√£o **Distribui√ß√£o de Colunas** na faixa **Exibi√ß√£o**>>**Visualiza√ß√£o dos Dados**. E visualizar todos os colaboradores de cada gerente.
> - Fiz pela forma mais prudente, realizei a fun√ß√£o **mesclar** da tabela **employee** com ela pr√≥pria, fazendo a jun√ß√£o entre o **nome do colaborador** e o **nome do gerente**. Na *coluna complexa* / *coluna mesclada* fiz a agrega√ß√£o pela op√ß√£o de **Contagem(N√£o Branco) do Nome do Gerente**. Na sequ√™ncia, renomei para **Quantidade de Subordinados** (qtd_subordinados).  
>
> ‚úÖ 12) Eliminar as colunas desnecess√°rias, que n√£o ser√£o usadas no relat√≥rio, de cada tabela.  
  
> ## üìã**Entrega**:  
> üéØArquivo fonte do Power BI:  
> [Desafio_02_DIOeSuzano_PowerBI-CriandoUmDashboardCorporativoIntegradoMysqlAzure.pbix](./Desafio_02_DIOeSuzano_PowerBI-CriandoUmDashboardCorporativoIntegradoMysqlAzure.pbix)  
> 
> ou _Link_ para visualiz√°-lo online:  
> [Desafio_02_DIOeSuzano_PowerBI-CriandoUmRelat√≥rioGerencialdeVendascomPowerBI_ONLINE](https://app.powerbi.com/groups/me/reports/20a72eb8-5356-4b61-908e-033fba482f7e/9ef8fc3f70a04d95a27a)  
>
>--- 
> üéØScripts de cria√ß√£o da estrutura dos dados (data base):  
> [script_criacao_banco_dados_company.sql](./dados/script_criacao_banco_dados_company.sql)  
>
> üéØScripts de carga dos dados:  
> [insercao_de_dados_e_queries.sql](./dados/insercao_de_dados_e_queries.sql)  

 ‚ùóüëèüéâFim do Desafio 06